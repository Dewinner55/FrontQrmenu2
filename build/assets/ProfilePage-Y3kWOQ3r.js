import{V as N,Y as p,a0 as e,a1 as d,a2 as L,a4 as g,ac as $,r as v,a6 as z,b2 as I,b3 as q,az as F,ae as B,ad as P,b4 as M,b5 as T,b6 as U,a5 as k,b7 as R,aA as A,b8 as D}from"./index-_UTRQYe1.js";import{C as G,s as E,I as w,d as C}from"./ImageS3-FPSzuAoL.js";import{a as S}from"./index-h1Zq5Vz8.js";const Q="_container_dqjq4_1",V="_content_dqjq4_11",Y="_section_1_dqjq4_17",H="_title_dqjq4_24",J="_nav_block_dqjq4_28",K="_nav_btn_dqjq4_34",O="_active_dqjq4_57",W="_section_2_dqjq4_61",r={container:Q,content:V,section_1:Y,title:H,nav_block:J,nav_btn:K,active:O,section_2:W},X="_container_jez58_1",Z="_loadingBlock_jez58_9",ee="_content_jez58_18",se="_header_jez58_24",ae="_title_jez58_28",ne="_add_jez58_32",te="_list_jez58_53",le="_item_jez58_62",oe="_bg_jez58_79",ce="_logo_jez58_87",ie="_info_jez58_102",re="_name_jez58_116",de="_address_jez58_130",_e="_btn_jez58_141",me="_addContainer_jez58_161",he="_no_title_jez58_170",ue="_no_btn_jez58_174",je="_form_jez58_191",pe="_footer_jez58_203",xe="_cancel_jez58_208",n={container:X,loadingBlock:Z,content:ee,header:se,title:ae,add:ne,list:te,item:le,bg:oe,logo:ce,info:ie,name:re,address:de,btn:_e,addContainer:me,no_title:he,no_btn:ue,form:je,footer:pe,cancel:xe},be=({onClose:s,open:m,onFinish:_,isLoading:c,currencyList:t})=>{const[h]=N.useForm(),{t:u}=p("translation",{keyPrefix:"Profile"}),{t:l}=p("translation",{keyPrefix:"Inputs"}),{t:o}=p("translation",{keyPrefix:"Buttons"}),x=async j=>{const a={...j};typeof a.languages=="object"&&(a.languages=a.languages.join(","));const f=E(a);_(f),c||(s(),h.resetFields())},b=()=>{s(),h.resetFields()};return e.jsx(G,{onClose:b,open:m,title:u("add_menu"),isProfile:!0,children:e.jsxs(N,{layout:"vertical",className:n.form,onFinish:x,form:h,children:[e.jsx(d,{label:l("label.rest_name"),name:"name",placeholder:l("label.rest_name")}),e.jsx(d,{label:l("label.country"),name:"country",placeholder:l("label.country"),type:"string"}),e.jsx(d,{label:l("label.city"),name:"city",placeholder:l("label.city"),type:"string"}),e.jsx(d,{label:l("label.address"),name:"address",placeholder:l("placeholder.address"),type:"default"}),e.jsx(d,{label:l("label.available_lang"),name:"languages",placeholder:l("placeholder.choose_lang"),type:"select",options:L,mode:"multiple"}),e.jsx(d,{label:l("label.choose_currency"),name:"currency_id",placeholder:l("placeholder.currency"),type:"select",options:t.map(j=>({label:`${j.name}, ${j.symbol}`,value:j.id}))}),e.jsxs("div",{className:n.footer,children:[e.jsx(g,{onClick:b,className:n.cancel,htmlType:"button",children:o("cancel")}),e.jsx(g,{loading:c,className:n.add,htmlType:"submit",children:"Создать"})]})]})},"create-restaurant")},ge=()=>{const s=$(),[m,_]=v.useState(!1),c=z(),{data:t,isLoading:h}=I(),[u,{isLoading:l}]=q(),{data:o,isLoading:x}=F(),{t:b}=p("translation",{keyPrefix:"Profile"}),j=async a=>{await u(a).unwrap()};return v.useEffect(()=>{c(B(""))},[]),e.jsxs("div",{className:n.container,children:[h||x?e.jsx("div",{className:n.loadingBlock,children:e.jsx(P,{size:40,color:"black"})}):e.jsxs("div",{className:n.content,children:[e.jsxs("div",{className:n.header,children:[e.jsx("h1",{className:n.title,children:b("my_restaurants")}),t!=null&&t.length?e.jsx("button",{className:n.add,onClick:()=>_(!0),children:b("add")}):null]}),t!=null&&t.length?e.jsx("div",{className:n.list,children:t==null?void 0:t.map(a=>e.jsxs("div",{className:n.item,children:[e.jsx(w,{className:n.logo,imageId:(a==null?void 0:a.logo)??C,alt:"item-logo"}),e.jsx(w,{className:n.bg,imageId:(a==null?void 0:a.image)??C,alt:"item-image"}),e.jsxs("div",{className:n.info,children:[e.jsx("p",{className:n.name,children:a.name}),e.jsx("p",{className:n.address,children:a.address}),e.jsx("button",{className:n.btn,onClick:()=>s(`/preview/${a.id}`),children:b("open")})]})]},a.id))}):e.jsxs("div",{className:n.addContainer,children:[e.jsx("p",{className:n.no_title,children:"К сожалению, у вас еще нет заведений"}),e.jsx("button",{className:n.no_btn,onClick:()=>_(!0),children:"Добавить"})]})]}),e.jsx(be,{currencyList:o??[],isLoading:l,onClose:()=>_(!1),open:m,onFinish:j})]})},fe="_container_16h8g_1",ye="_loadingBlock_16h8g_4",Ne="_content_16h8g_13",ve="_title_16h8g_18",ke="_block_16h8g_22",we="_footer_16h8g_50",Ce="_cancel_16h8g_60",$e="_add_16h8g_64",i={container:fe,loadingBlock:ye,content:Ne,title:ve,block:ke,footer:we,cancel:Ce,add:$e},ze=()=>{const{data:s,isLoading:m}=M(),[_,{isLoading:c}]=T(),[t,{isLoading:h}]=U(),[u]=N.useForm(),{t:l}=p("translation",{keyPrefix:"Profile"}),{t:o}=p("translation",{keyPrefix:"Inputs"}),{t:x}=p("translation",{keyPrefix:"Buttons"}),b=async a=>{await _(a).unwrap().catch(f=>k("error",f.data.detail)).finally(()=>u.resetFields())},j=async a=>{await t(a).unwrap().catch(f=>k("error",f.data.detail)).finally(()=>u.resetFields())};return e.jsx("div",{className:i.container,children:m?e.jsxs("div",{className:i.loadingBlock,children:[e.jsx(P,{size:40,color:"black"}),"Загрузка.."]}):e.jsxs("div",{className:i.content,children:[e.jsx("h1",{className:i.title,children:l("personal_info")}),e.jsxs("div",{className:i.block,children:[e.jsxs("section",{children:[e.jsx("h4",{children:l("user_data_title")}),e.jsxs(N,{layout:"vertical",className:i.form,initialValues:{first_name:s==null?void 0:s.first_name,last_name:s==null?void 0:s.last_name,display_name:s==null?void 0:s.display_name},onFinish:j,children:[e.jsx(d,{label:o("label.name"),name:"first_name",placeholder:o("placeholder.name"),type:"string"}),e.jsx(d,{label:o("label.surname"),name:"last_name",placeholder:o("placeholder.surname"),type:"string"}),e.jsx(d,{label:o("label.display_name"),name:"display_name",placeholder:o("placeholder.display_name")}),e.jsxs("div",{className:i.footer,children:[e.jsx(g,{className:i.cancel,htmlType:"reset",children:x("cancel")}),e.jsx(g,{className:i.add,htmlType:"submit",loading:h,children:x("save")})]})]})]}),e.jsxs("section",{children:[e.jsx("h4",{children:l("update_pass_title")}),e.jsxs(N,{layout:"vertical",className:i.form,onFinish:b,form:u,children:[e.jsx(d,{label:o("label.old_pass"),name:"old_password",placeholder:o("placeholder.old_pass"),type:"password"}),e.jsx(d,{label:o("label.new_pass"),name:"new_password",placeholder:o("placeholder.new_pass"),type:"password"}),e.jsx(d,{label:o("label.new_pass_conf"),name:"new_confirm_password",placeholder:o("placeholder.new_pass_conf"),type:"password"}),e.jsxs("div",{className:i.footer,children:[e.jsx(g,{className:i.cancel,htmlType:"reset",children:x("cancel")}),e.jsx(g,{loading:c,className:i.add,htmlType:"submit",children:x("save_pass")})]})]})]})]})]})})},Pe="_container_1xs3b_1",Le="_content_1xs3b_4",Ie="_title_1xs3b_9",qe="_confirm_1xs3b_18",Fe="_subtitle_1xs3b_31",y={container:Pe,content:Le,title:Ie,confirm:qe,subtitle:Fe},Be=()=>{const[s,{isLoading:m}]=R(),_=$(),{t:c}=p("translation",{keyPrefix:"Profile"}),t=async()=>{await s().unwrap().then(()=>{_("/"),window.location.reload()})};return e.jsx("div",{className:y.container,children:e.jsxs("div",{className:y.content,children:[e.jsx("h1",{className:y.title,children:c("logout_title")}),e.jsxs("div",{className:y.confirm,children:[e.jsx("p",{className:y.subtitle,children:c("logout_subtitle")}),e.jsx(g,{loading:m,onClick:t,children:c("logout_btn")})]})]})})},Me=()=>{const[s,m]=v.useState(0),_=z(),{t:c}=p("translation",{keyPrefix:"Profile"}),t=u=>{m(u)},h=()=>{switch(s){case 0:return e.jsx(ge,{});case 1:return e.jsx(ze,{});case 2:return e.jsx(Be,{});default:return"undefined"}};return v.useEffect(()=>{S(!1),_(A(!1))},[]),e.jsx("main",{className:r.container,children:e.jsxs(D.div,{className:r.content,initial:{opacity:0,y:15},animate:{opacity:1,y:0,transition:{ease:"linear",duration:.5}},children:[e.jsxs("section",{className:r.section_1,children:[e.jsx("h1",{className:r.title,children:c("my_profile")}),e.jsxs("div",{className:r.nav_block,children:[e.jsx("button",{className:`${r.nav_btn} ${s===0?r.active:""}`,onClick:()=>t(0),children:c("restaurants")}),e.jsx("button",{className:`${r.nav_btn} ${s===1?r.active:""}`,onClick:()=>t(1),children:c("personal_info")}),e.jsx("button",{className:`${r.nav_btn} ${s===2?r.active:""}`,onClick:()=>t(2),children:c("logout_title")})]})]}),e.jsx("section",{className:r.section_2,children:h()})]},"profile-main")})},Ae=()=>e.jsx(Me,{});export{Ae as default};
